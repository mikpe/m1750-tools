<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.50
     from ld.texinfo on 20 November 1996 -->

<TITLE>Using LD, the GNU linker - MEMORY</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="ld_1.html">first</A>, <A HREF="ld_15.html">previous</A>, <A HREF="ld_17.html">next</A>, <A HREF="ld_33.html">last</A> section, <A HREF="ld_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC16" HREF="ld_toc.html#TOC16">Memory Layout</A></H2>
<P>
<A NAME="IDX237"></A>
<A NAME="IDX238"></A>
<A NAME="IDX239"></A>
<A NAME="IDX240"></A>
The linker's default configuration permits allocation of all available memory.
You can override this configuration by using the <CODE>MEMORY</CODE> command.  The
<CODE>MEMORY</CODE> command describes the location and size of blocks of
memory in the target.  By using it carefully, you can describe which
memory regions may be used by the linker, and which memory regions it
must avoid.  The linker does not shuffle sections to fit into the
available regions, but does move the requested sections into the correct
regions and issue errors when the regions become too full.  

</P>
<P>
A command file may contain at most one use of the <CODE>MEMORY</CODE>
command; however, you can define as many blocks of memory within it as
you wish.  The syntax is:
        

<PRE>
MEMORY 
  {
    <VAR>name</VAR> (<VAR>attr</VAR>) : ORIGIN = <VAR>origin</VAR>, LENGTH = <VAR>len</VAR>
    ...
  }
</PRE>

<DL COMPACT>

<DT><CODE><VAR>name</VAR></CODE>
<DD>
<A NAME="IDX241"></A>
 
is a name used internally by the linker to refer to the region. Any
symbol name may be used.  The region names are stored in a separate
name space, and will not conflict with symbols, file names or section
names.  Use distinct names to specify multiple regions.

<A NAME="IDX242"></A>
<DT><CODE>(<VAR>attr</VAR>)</CODE>
<DD>
is an optional list of attributes, permitted for compatibility with the
AT&#38;T linker but not used by <CODE>ld</CODE> beyond checking that the
attribute list is valid.  Valid attribute lists must be made up of the
characters "<CODE>LIRWX</CODE>".  If you omit the attribute list, you may
omit the parentheses around it as well.

<A NAME="IDX243"></A>
<A NAME="IDX244"></A>
<A NAME="IDX245"></A>
<DT><CODE><VAR>origin</VAR></CODE>
<DD>
is the start address of the region in physical memory.  It is
an expression that must evaluate to a constant before
memory allocation is performed. The keyword <CODE>ORIGIN</CODE> may be
abbreviated to <CODE>org</CODE> or <CODE>o</CODE> (but not, for example, <SAMP>`ORG'</SAMP>).

<A NAME="IDX246"></A>
<A NAME="IDX247"></A>
<A NAME="IDX248"></A>
<DT><CODE><VAR>len</VAR></CODE>
<DD>
is the size in bytes of the region (an expression).
The keyword <CODE>LENGTH</CODE> may be abbreviated to <CODE>len</CODE> or <CODE>l</CODE>.
</DL>

<P>
For example, to specify that memory has two regions available for
allocation--one starting at 0 for 256 kilobytes, and the other
starting at <CODE>0x40000000</CODE> for four megabytes:

</P>

<PRE>
MEMORY 
  {
  rom : ORIGIN = 0, LENGTH = 256K
  ram : org = 0x40000000, l = 4M
  }
</PRE>

<P>
Once you have defined a region of memory named <VAR>mem</VAR>, you can direct
specific output sections there by using a command ending in
<SAMP>`&#62;<VAR>mem</VAR>'</SAMP> within the <CODE>SECTIONS</CODE> command (see section <A HREF="ld_21.html#SEC21">Optional Section Attributes</A>).  If the combined output sections directed to a region are too
big for the region, the linker will issue an error message.

</P>
<P><HR><P>
Go to the <A HREF="ld_1.html">first</A>, <A HREF="ld_15.html">previous</A>, <A HREF="ld_17.html">next</A>, <A HREF="ld_33.html">last</A> section, <A HREF="ld_toc.html">table of contents</A>.
</BODY>
</HTML>
