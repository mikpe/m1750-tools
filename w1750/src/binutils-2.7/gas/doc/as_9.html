<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.50
     from as.texinfo on 29 November 1996 -->

<TITLE>Using m1750-coff-as - MIL-STD-1750 Dependent Features</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="as_1.html">first</A>, <A HREF="as_8.html">previous</A>, <A HREF="as_10.html">next</A>, <A HREF="as_11.html">last</A> section, <A HREF="as_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC131" HREF="as_toc.html#TOC131">MIL-STD-1750 Dependent Features</A></H1>

<P>
<A NAME="IDX389"></A>

</P>


<H2><A NAME="SEC132" HREF="as_toc.html#TOC132">M1750 Options</A></H2>

<P>
<A NAME="IDX390"></A>
<A NAME="IDX391"></A>
The MIL-STD-1750 version of <CODE>m1750-coff-as</CODE> has a few machine
dependent options.

</P>
<P>
<A NAME="IDX392"></A>

</P>

<P>
<A NAME="IDX393"></A>
<A NAME="IDX394"></A>
<A NAME="IDX395"></A>
<CODE>m1750-coff-as</CODE> can assemble code for several different members of the
MIL-STD-1750A/B family.  The default depends upon how <CODE>m1750-coff-as</CODE>
was configured when it was built; normally, the default is to assemble
code for the 1750A.  The following options may be used to
change the default.  These options control which instructions and
addressing modes are permitted.  The members of the MIL-STD-1750 family are
very similar.  For detailed information about the differences, see 
MIL-STD-1750B, or 1750 vendor's literature.

</P>
<DL COMPACT>

<DT><SAMP>`-A1750a'</SAMP>
<DD>
Assemble for the 1750a with no expanded memory. (the default)

<DT><SAMP>`-A1750b'</SAMP>
<DD>
Assemble for the 1750b with all instruction options but no expanded memory.

<DT><SAMP>`-Ama31750'</SAMP>
<DD>
Assemble for the GEC-Plessey MA31750 in 1750B mode.

<DT><SAMP>`-Amas281'</SAMP>
<DD>
Assemble for the GEC-Plessey MAS281 or McDonnell Douglas MDC281.

<DT><SAMP>`-Ammu'</SAMP>
<DD>
Support expanded memory.

<DT><SAMP>`-Ano-mmu'</SAMP>
<DD>
Do not support expanded memory.

<DT><SAMP>`-Ab1'</SAMP>
<DD>
Permit 1750B optional mathematical instructions.

<DT><SAMP>`-Ab2'</SAMP>
<DD>
Permit 1750B optional long loads and stores.

<DT><SAMP>`-Ab3'</SAMP>
<DD>
Permit 1750B optional unsigned arithmetic and load and store byte instructions.

<DT><SAMP>`-Ano-b1'</SAMP>
<DD>
Reject 1750B optional mathematical instructions.

<DT><SAMP>`-Ano-b2'</SAMP>
<DD>
Reject 1750B optional long loads and stores.

<DT><SAMP>`-Ano-b3'</SAMP>
<DD>
Reject 1750B optional unsigned arithmetic and load and store byte instructions.

</DL>



<H2><A NAME="SEC133" HREF="as_toc.html#TOC133">Syntax</A></H2>

<P>
<A NAME="IDX396"></A>
<A NAME="IDX397"></A>
The MIL-STD-1750 version of <CODE>m1750-coff-as</CODE> uses instructions names and
syntax as defined in the standard. Directives follow the <CODE>m1750-coff-as</CODE> conventions. 

</P>
<P>
<A NAME="IDX398"></A>
The names of the registers are: r0, r1, r2, r3, r4, r5, r6, r7, r8. r9, r10, r11, 
r12, r13, r14, r15. The assembler also accepts an upper case letter R. The registers r1 to r15 
may be used as index registers. The registers r12 to r15 may be used as base registers.

</P>
<P>
<A NAME="IDX399"></A>
<A NAME="IDX400"></A>
The following addressing modes are understood. Note that address will be converted
into word adddesses when used in an instruction.

</P>

<DL COMPACT>

<DT><STRONG>Register Direct</STRONG>
<DD>
<SAMP>`lr     <VAR>register</VAR>,<VAR>register</VAR>'</SAMP>

<DT><STRONG>Memory Direct</STRONG>
<DD>
<SAMP>`l      <VAR>word-address</VAR>'</SAMP>

<DT><STRONG>Memory Direct Indexed</STRONG>
<DD>
<SAMP>`l      <VAR>word-address</VAR>,<VAR>index-register</VAR>'</SAMP>

<DT><STRONG>Memory Indirect</STRONG>
<DD>
<SAMP>`li     <VAR>address</VAR>'</SAMP>

<DT><STRONG>Memory Indirect with Pre-Indexing</STRONG>
<DD>
<SAMP>`li     <VAR>word-address</VAR>,<VAR>index-register</VAR>'</SAMP>

<DT><STRONG>Immediate Long</STRONG>
<DD>
<SAMP>`lim    <VAR>number</VAR>'</SAMP> 

<DT><STRONG>Immediate Short Positive</STRONG>
<DD>
<SAMP>`lisp   <VAR>short-number</VAR>'</SAMP>

<DT><STRONG>Immediate Short Negative</STRONG>
<DD>
<SAMP>`lisn   <VAR>short-number</VAR>'</SAMP>

<DT><STRONG>Instruction Counter Relative</STRONG>
<DD>
<SAMP>`br     <VAR>word-displacement</VAR>'</SAMP>

<DT><STRONG>Base Relative</STRONG>
<DD>
<SAMP>`lb     <VAR>base-register</VAR>,<VAR>offset</VAR>'</SAMP>

<DT><STRONG>Base Relative Indexed</STRONG>
<DD>
<SAMP>`lb     <VAR>base-register</VAR>,<VAR>offset</VAR>,<VAR>index-register</VAR>'</SAMP>

<DT><STRONG>Special</STRONG>
<DD>
<SAMP>`nop'</SAMP>

</DL>



<H2><A NAME="SEC134" HREF="as_toc.html#TOC134">Floating Point</A></H2>

<P>
<A NAME="IDX401"></A>
<A NAME="IDX402"></A>
The floating and fixed point formats generated by directives are these.

</P>
<DL COMPACT>

<DT><CODE>.float</CODE>
<DD>
<A NAME="IDX403"></A>
 
<CODE>Single</CODE> precision floating point constants (See MIL-STD-1750A section 4.1.5).

<A NAME="IDX404"></A>
<DT><CODE>.double</CODE>
<DD>
<CODE>Double</CODE> precision floating point constants (See MIL-STD-1750A section 4.1.6).

</DL>



<H2><A NAME="SEC135" HREF="as_toc.html#TOC135">M1750 Machine Directives</A></H2>

<P>
<A NAME="IDX405"></A>
<A NAME="IDX406"></A>

</P>



<H3><A NAME="SEC136" HREF="as_toc.html#TOC136"><CODE>.skip <VAR>number</VAR></CODE></A></H3>
<P>
<A NAME="IDX407"></A>
<A NAME="IDX408"></A>
<CODE>.skip</CODE> is indentical to the <CODE>.space</CODE> directive.

</P>


<H3><A NAME="SEC137" HREF="as_toc.html#TOC137"><CODE>.rdata <VAR>subsection</VAR></CODE></A></H3>

<P>
<A NAME="IDX409"></A>
<CODE>.rdata</CODE> tells <CODE>m1750-coff-as</CODE> to assemble the following statements onto the
end of the read-only data subsection numbered <VAR>subsection</VAR> (which is an
absolute expression).  If <VAR>subsection</VAR> is omitted, it defaults
to zero.

</P>


<H3><A NAME="SEC138" HREF="as_toc.html#TOC138"><CODE>.rodata <VAR>subsection</VAR></CODE></A></H3>

<P>
<A NAME="IDX410"></A>
<CODE>.rdata</CODE> is identical to a <CODE>.rdata</CODE> directive.

</P>


<H3><A NAME="SEC139" HREF="as_toc.html#TOC139"><CODE>.sbam <VAR>flonums</VAR></CODE></A></H3>

<P>
<A NAME="IDX411"></A>
<A NAME="IDX412"></A>
<CODE>.sbam</CODE> expects one or more flonums, separated by commas.  It
assembles <CODE>Single</CODE> precision binary angular measurement (See MIL-STD-1750B section 4.1.11).

</P>


<H3><A NAME="SEC140" HREF="as_toc.html#TOC140"><CODE>.dbam <VAR>flonums</VAR></CODE></A></H3>

<P>
<A NAME="IDX413"></A>
<A NAME="IDX414"></A>
<CODE>.dbam</CODE> expects one or more flonums, separated by commas.  It
assembles <CODE>Double</CODE> precision binary angular measurement (See MIL-STD-1750B section 4.1.12).

</P>


<H2><A NAME="SEC141" HREF="as_toc.html#TOC141">Opcodes</A></H2>

<P>
index M1750 opcodes
index opcodes, M1750
index instruction set, M1750

</P>



<H3><A NAME="SEC142" HREF="as_toc.html#TOC142">Extended Floating Load Register</A></H3>

<P>
The 1750 does not have the important load register instruction for extended
precision floating point. The reason is we can copy a 3-word extended floating
point value from one triple register to another using a single load register
and a double load register. However if the source triple and destination triples
overlap, then it is important to get the single and double load in the correct
order otherwise the source will be overwritten before it is completely copied.

</P>
<P>
The opcode "eflr" is translated by the assembler into either a single load followed
by a double load, or a double load followed by a single load, depending on which
registers are used, and guarantees correct operation.

</P>
<P>
Note that the condition codes will not be correctly set by eflr. To set the
condition codes you should do an extended compare with zero. Of course to 
check whether a number is negative or not, no matter whether it is a 16 bit,
32 bit or 48 bit, fixed or floating, you only have to test the sign bit of the first word.

</P>


<H3><A NAME="SEC143" HREF="as_toc.html#TOC143">Expanded Memory Support</A></H3>

<P>
<A NAME="IDX415"></A>
<A NAME="IDX416"></A>
<A NAME="IDX417"></A>
<A NAME="IDX418"></A>

</P>
<P>
There are two macro-like instructions, LSJS and LURS, for supporting subprogram call and return
across address states. Normally these will be translated by the assembler into
SJS and URS instructions, but if the assembler is run with the expanded memory option <CODE>-Ammu</CODE>
then LSJS is expended into an sequence of instructions that makes a call to a subprogram that
may be in a different address state. The LURS instruction is converted into a LST instruction,
using the register given in the LURS instruction (usually R15), and an offset of zero.
 

</P>


<H3><A NAME="SEC144" HREF="as_toc.html#TOC144">Branch Improvement</A></H3>

<P>
<A NAME="IDX419"></A>
<A NAME="IDX420"></A>
<A NAME="IDX421"></A>
<A NAME="IDX422"></A>
Certain pseudo opcodes are permitted for branch instructions.
They expand to the shortest branch instruction that reach the
target.  Generally these mnemonics are made by substituting <SAMP>`j'</SAMP> for
<SAMP>`b'</SAMP> at the start of a 1750 mnemonic.

</P>
<P>
The following table summarizes the pseudo-operations. 

</P>

<PRE>
+-----------+----------+--------------+
| Pseudo    |    Instruction size     |
| Op        | 16 bits  |  32 bits     |
+-----------+----------+--------------+
| j    L1   | br   L1  |  jc   uc,L1  |
| jeq  L1   | beq  L1  |  jc   eq,L1  |
| jne  L1   | bne  L1  |  jc   ne,L1  |
| jgt  L1   | bgt  L1  |  jc   gt,L1  | 
| jlt  L1   | blt  L1  |  jc   lt,L1  |
| jge  L1   | bge  L1  |  jc   ge,L1  |
| jle  L1   | ble  L1  |  jc   le,L1  | 
+-----------+----------+--------------+
</PRE>



<H3><A NAME="SEC145" HREF="as_toc.html#TOC145">XIO Commands</A></H3>
<P>
<A NAME="IDX423"></A>
All the MIL-STD-1750A and 1750B XIO commands are supported.

</P>
<P>
  BIT, CC, CI, CLC, CLIR, CO, DMAD, DMAE, DSBL, DSUR, 
  ENBL, ESUR, GO, ICW, ITA, ITAR, ITB, ITBR, ITGI, LMP, 
  LOS, LXMP, MPEN, OD, OTA, OTAR, OTB, OTBR, OTGR, PI, 
  PO, RCFR, RCS, RCW, RDI, RDOR, RDOW, RFMK, RFR, RIC1, 
  RIC2, RIPR, RLP, RMFA, RMFP, RMFS, RMK, RMP, RNS, ROPR, 
  ROS, RPBS, RPI, RPIR, RPS, RSW, RXMP, SFMK, SFR, SMK, 
  SPI, TAH, TAS, TBH, TBS, TPIO, WIPR, WOPR, WPBS, WSW

</P>


<H3><A NAME="SEC146" HREF="as_toc.html#TOC146">Special Characters</A></H3>

<P>
<A NAME="IDX424"></A>
<A NAME="IDX425"></A>
<A NAME="IDX426"></A>
<A NAME="IDX427"></A>
<A NAME="IDX428"></A>
<A NAME="IDX429"></A>
The
line-comment character is <SAMP>`!'</SAMP>.  If a <SAMP>`#'</SAMP> appears at the beginning of a line, it
is treated as a comment unless it looks like <SAMP>`# line file'</SAMP>, in
which case it is treated normally.

</P>

<P>
@raisesections

</P>
<P><HR><P>
Go to the <A HREF="as_1.html">first</A>, <A HREF="as_8.html">previous</A>, <A HREF="as_10.html">next</A>, <A HREF="as_11.html">last</A> section, <A HREF="as_toc.html">table of contents</A>.
</BODY>
</HTML>
